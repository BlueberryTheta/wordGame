:root{
  --bg:#0f1222; --fg:#e9ecf1; --muted:#a7b0c3; --acc:#78d9ff; --ok:#6dd16a; --bad:#ff6b6b; --card:#171a2e; --shade:#202543;
  --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
/* Light theme overrides */
.theme-light{
  --bg:#f6f8fb; --fg:#0f1222; --muted:#5a657a; --acc:#007acc; --ok:#2a8f2a; --bad:#c84444; --card:#ffffff; --shade:#d8dde8;
}
*{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body{margin:0; background:linear-gradient(180deg,var(--bg),#0c0f1a); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif}
.app{max-width:800px; margin:32px auto; padding:0 16px}
h1{margin:0 0 8px 0}
.titlebar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px}
.title-main{display:flex; flex-direction:column}
.title-main h1{margin:0}
.title-main img{max-width:100%; height:140px}
.subtitle{color:var(--muted); font-size:20px; margin-top:4px; margin-bottom:8px; font-weight:700; letter-spacing:.2px; position:relative; opacity:0; transform:translateY(14px) scale(.96); filter:blur(4px); animation:subtitleEnter 1.05s cubic-bezier(.18,.9,.24,1.3) .1s forwards}
@keyframes subtitleEnter{0%{opacity:0; transform:translateY(24px) scale(.94); filter:blur(6px)}60%{opacity:1; transform:translateY(-6px) scale(1.08); filter:blur(0)}100%{opacity:1; transform:translateY(0) scale(1); filter:blur(0)}}
.subtitle::after{content:""; position:absolute; left:0; right:0; bottom:-8px; margin:auto; width:0; height:3px; border-radius:3px; background:linear-gradient(90deg, rgba(120,217,255,0), rgba(120,217,255,.9), rgba(120,217,255,0)); transform-origin:center; animation:subtitleUnderline 1.1s cubic-bezier(.2,.7,.2,1) .2s forwards}
@keyframes subtitleUnderline{0%{width:0; opacity:0}55%{width:90%; opacity:1}100%{width:52%; opacity:.85}}
/* Letter-by-letter reveal for subtitle */
.subtitle.reveal-chars{white-space:nowrap}
.subtitle .char{display:inline-block; will-change:transform, opacity, filter; transform:translateY(16px) scale(.94); opacity:0; filter:blur(3px);
  animation: subtitleCharIn .6s cubic-bezier(.2,.9,.2,1.2) forwards}
@keyframes subtitleCharIn{0%{transform:translateY(16px) scale(.94); opacity:0; filter:blur(3px)}60%{transform:translateY(-4px) scale(1.06); opacity:1; filter:blur(0)}100%{transform:translateY(0) scale(1); opacity:1; filter:blur(0)}}
.title-actions{display:flex; align-items:center; gap:8px}
.dev-toggle{height:36px; padding:0 10px; border-radius:10px; border:1px solid var(--shade); background:#0e1120; color:var(--fg); cursor:pointer}
.theme-toggle{height:36px; padding:0 10px; border-radius:10px; border:1px solid var(--shade); background:#0e1120; color:var(--fg); cursor:pointer}
.help-btn{position:relative; width:40px; height:40px; border-radius:12px; border:1px solid var(--shade); background:
  radial-gradient(120% 120% at 20% 10%, rgba(120,217,255,.15), transparent 40%),
  linear-gradient(180deg,#0f142d,#0e1120);
  color:var(--fg); font-weight:800; line-height:1; font-size:18px; cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.02);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
}
.help-btn:hover{transform:translateY(-1px); background:
  radial-gradient(120% 120% at 70% 0%, rgba(120,217,255,.18), transparent 40%),
  linear-gradient(180deg,#12183a,#0f142d);
  box-shadow:0 8px 18px rgba(0,0,0,.32), 0 0 0 3px rgba(120,217,255,.12);
}
.help-btn:active{transform:translateY(0); box-shadow:0 4px 12px rgba(0,0,0,.26)}
.help-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(120,217,255,.2), 0 6px 14px rgba(0,0,0,.28)}
/* Tooltip */
.help-btn::after{content:attr(data-tip); position:absolute; left:50%; top:-8px; transform:translate(-50%,-100%) scale(.96); opacity:0; pointer-events:none;
  background:rgba(15,18,34,.95); color:var(--fg); border:1px solid var(--shade); border-radius:8px; padding:6px 8px; font-size:12px; white-space:nowrap;
  box-shadow:0 10px 22px rgba(0,0,0,.35); transition:opacity .15s ease, transform .12s ease;}
.help-btn:hover::after,.help-btn:focus-visible::after{opacity:1; transform:translate(-50%,-110%) scale(1)}
.meta{display:flex; gap:16px; color:var(--muted); margin-bottom:16px}
.meta > div{
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:12px;
  border:1px solid var(--shade);
  background:linear-gradient(180deg, rgba(23,26,46,.65), rgba(18,21,37,.65));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02), 0 6px 14px rgba(0,0,0,.18);
  font-weight:700; letter-spacing:.2px;
}
.theme-light .meta > div{
  background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(246,248,251,.9));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.5), 0 6px 14px rgba(0,0,0,.08);
}
.meta > div::before{ content:""; width:18px; height:18px; display:inline-block; background-color: currentColor; opacity:.95 }
/* Calendar icon mask for Day */
.meta > div:nth-child(1)::before{
  -webkit-mask: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"%3E%3Crect x="3" y="4" width="18" height="16" rx="2.5" fill="none" stroke="%23fff" stroke-width="2"/%3E%3Cpath d="M3 8h18" stroke="%23fff" stroke-width="2"/%3E%3Ccircle cx="8" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="12" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="16" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="8" cy="16" r="1.3" fill="%23fff"/%3E%3Ccircle cx="12" cy="16" r="1.3" fill="%23fff"/%3E%3Ccircle cx="16" cy="16" r="1.3" fill="%23fff"/%3E%3C/svg%3E') no-repeat center / contain;
          mask: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"%3E%3Crect x="3" y="4" width="18" height="16" rx="2.5" fill="none" stroke="%23fff" stroke-width="2"/%3E%3Cpath d="M3 8h18" stroke="%23fff" stroke-width="2"/%3E%3Ccircle cx="8" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="12" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="16" cy="12" r="1.3" fill="%23fff"/%3E%3Ccircle cx="8" cy="16" r="1.3" fill="%23fff"/%3E%3Ccircle cx="12" cy="16" r="1.3" fill="%23fff"/%3E%3Ccircle cx="16" cy="16" r="1.3" fill="%23fff"/%3E%3C/svg%3E') no-repeat center / contain;
}
/* Letter A icon mask for Letters */
.meta > div:nth-child(2)::before{ display:none; content:none }
/* Hide 'Day:' label text without changing HTML */
.meta > div:first-child{ font-size:0 }
.meta > div:first-child #dayKey{ font-size:12px }
.meta #dayKey,
.meta #wordLength{
  display:inline-block; font:700 12px var(--mono); color:var(--fg);
  padding:2px 6px; border-radius:8px; border:1px solid var(--shade);
  background:#0e1120; box-shadow:inset 0 -2px 0 rgba(255,255,255,.03);
}
.theme-light .meta #dayKey,
.theme-light .meta #wordLength{
  background:#ffffff; color:#0f1222; box-shadow:inset 0 -2px 0 rgba(0,0,0,.04);
}
.masked{font:600 28px var(--mono); letter-spacing:2px; background:var(--card); border:1px solid var(--shade); padding:16px; border-radius:10px; text-align:center; margin:12px 0}
.stats{display:flex; gap:24px; margin:12px 0; color:var(--muted)}
.stats .badge{
  display:inline-flex; align-items:center; gap:10px; padding:8px 12px; border-radius:12px;
  border:1px solid var(--shade);
  background:linear-gradient(180deg,#11162c,#0e1120);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02), 0 8px 16px rgba(0,0,0,.22);
}
.theme-light .stats .badge{
  background:linear-gradient(180deg,#ffffff,#f6f8fb);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.6), 0 8px 16px rgba(0,0,0,.10);
}
.stats .badge strong{
  display:inline-block; min-width:26px; padding:4px 8px; border-radius:10px;
  font:800 14px var(--mono); letter-spacing:.3px; color:#001018;
  background:linear-gradient(180deg,var(--acc),#5fc9ef);
  border:1px solid #3a7395; text-shadow:0 1px 0 rgba(255,255,255,.35);
  box-shadow:0 6px 16px rgba(120,217,255,.25), inset 0 -2px 0 rgba(255,255,255,.2);
}
.theme-light .stats .badge strong{ color:#001018 }
.panel{background:var(--card); border:1px solid var(--shade); border-radius:12px; padding:16px; margin:16px 0}
.panel h2{margin:0 0 12px 0; font-size:18px}
.row{display:flex; gap:8px}
input{flex:1; background:#0e1120; border:1px solid var(--shade); color:var(--fg); padding:10px 12px; border-radius:8px; font-size:16px}
button{background:var(--acc); color:#001018; border:0; padding:10px 14px; border-radius:8px; font-weight:600; cursor:pointer}
button:disabled{opacity:.5; cursor:not-allowed}
.qa{margin-top:12px; display:flex; flex-direction:column; gap:8px}
.qa .item{background:#0e1120; border:1px solid var(--shade); padding:10px 12px; border-radius:8px}
.qa .q{color:#b8c2d9}
.qa .a{color:#dff1ff}
.result{margin-top:10px; min-height:20px}
.ok{color:var(--ok)}
.bad{color:var(--bad)}
footer{margin-top:24px; color:var(--muted)}

/* Responsive footer ad */
.ads-footer{max-width:100%; padding:16px 0 24px; margin:24px auto 0; display:flex; justify-content:center}
.ads-footer .adsbygoogle{display:block; width:100%; max-width:100%}

/* Tutorial modal */
.hidden{display:none}
.backdrop{position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:center; justify-content:center; z-index:1000; padding:16px}
.backdrop.hidden{display:none}
.modal{background:var(--card); border:1px solid var(--shade); border-radius:12px; max-width:560px; width:100%; box-shadow:0 10px 30px rgba(0,0,0,.35)}
.modal-header{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--shade)}
.modal-body{padding:14px}
.close-btn{position:relative; width:40px; height:40px; border-radius:12px; border:1px solid var(--shade); background:
  radial-gradient(120% 120% at 20% 10%, rgba(120,217,255,.15), transparent 40%),
  linear-gradient(180deg,#0f142d,#0e1120);
  color:var(--fg); font-weight:800; line-height:1; font-size:18px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 14px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.02);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease}
.close-btn:hover{transform:translateY(-1px); background:
  radial-gradient(120% 120% at 70% 0%, rgba(120,217,255,.18), transparent 40%),
  linear-gradient(180deg,#12183a,#0f142d);
  box-shadow:0 8px 18px rgba(0,0,0,.32), 0 0 0 3px rgba(120,217,255,.12)}
.close-btn:active{transform:translateY(0); box-shadow:0 4px 12px rgba(0,0,0,.26)}
.close-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(120,217,255,.2), 0 6px 14px rgba(0,0,0,.28)}
.modal-body ul{margin:0; padding-left:20px; color:var(--fg)}

/* Dev tools */
.title-actions{display:flex; align-items:center; gap:8px}
.dev-toggle{height:36px; padding:0 10px; border-radius:10px; border:1px solid var(--shade); background:#0e1120; color:var(--fg); cursor:pointer}
.dev-tools{position:fixed; right:16px; bottom:16px; z-index:1500}
.dev-tools.hidden{display:none}
.dev-inner{background:linear-gradient(180deg,rgba(23,26,46,.95),rgba(18,21,37,.95)); border:1px solid var(--shade); border-radius:12px; padding:12px; box-shadow:0 10px 30px rgba(0,0,0,.45); min-width:280px}
.dev-row{display:flex; align-items:center; gap:8px; margin-bottom:8px}
.dev-row label{width:110px; color:var(--muted); font-size:12px}
.dev-row input{flex:1; background:#0e1120; border:1px solid var(--shade); color:var(--fg); padding:8px 10px; border-radius:8px}
.dev-actions{display:flex; align-items:center; gap:8px}
.dev-msg{color:var(--muted); font-size:12px}

/* Tiles and animations */
.tiles{display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap}
.tile{width:44px; height:54px; display:flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--shade); background:linear-gradient(180deg,#0f142c,#0b0e1d); font:700 22px var(--mono); letter-spacing:.5px; color:var(--fg); box-shadow:inset 0 -3px 0 rgba(255,255,255,.03)}
.tile.empty{color:var(--muted); opacity:.85}
.tile.reveal{animation:tileReveal .32s ease-out; border-color:#2f3a6a; background:linear-gradient(180deg,#14204a,#0f142c)}
@keyframes tileReveal{0%{transform:scale(.9); filter:brightness(1.2)}60%{transform:scale(1.06); filter:brightness(1.15)}100%{transform:scale(1); filter:brightness(1)}}

/* Tutorial modal typography enhancements */
.modal-header h2{margin:0; font-weight:800; letter-spacing:.2px}
.modal-body{line-height:1.6}
.modal-body ul{list-style:none; padding-left:0}
.modal-body li{position:relative; padding:10px 12px 10px 40px; background:rgba(32,37,67,.55); border:1px solid var(--shade); border-radius:12px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02)}
.modal-body li+li{margin-top:10px}
.modal-body li::before{content:""; position:absolute; left:14px; top:50%; width:12px; height:12px; border-radius:50%; transform:translateY(-50%);
  background:radial-gradient(120% 120% at 50% 30%, rgba(120,217,255,.9), rgba(120,217,255,.35)); box-shadow:0 0 0 2px rgba(120,217,255,.18)}

/* Score visuals */
.hidden{display:none}
.score{margin-top:12px; display:flex; flex-direction:column; gap:10px; align-items:center}
.score .row{display:flex; align-items:center; gap:8px}
.score .row.guesses .cell{width:22px; height:22px; border-radius:6px}
.score .row.questions .cell{width:12px; height:12px; border-radius:50%}
.score .row .cell{border:1px solid var(--shade); background:#0e1120; box-shadow:inset 0 -2px 0 rgba(255,255,255,.03)}
.score .row .cell.filled{background:linear-gradient(180deg,var(--acc),#5fc9ef); border-color:#3a7395}
.score-actions{margin-top:10px}
.share-btn{background:linear-gradient(180deg,var(--acc),#5fc9ef); color:#001018; border:0; padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer; box-shadow:0 6px 16px rgba(120,217,255,.25)}
.share-btn:hover{transform:translateY(-1px)}

/* End-of-game modal text styling */
#gameOverBackdrop .modal-body{ text-align:center }
#gameOverMessage{
  display:inline-block; margin:0; padding:14px 16px; border-radius:14px;
  background:rgba(32,37,67,.55); border:1px solid var(--shade);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
  font-size:18px; font-weight:700; letter-spacing:.2px;
}
#gameOverMessage::before{
  content:"⭐"; display:block; font-size:22px; margin-bottom:8px; opacity:.9;
}
/* Temporarily hide Dev button */
#devToggle{ display:none !important }

/* Title/logo swap per theme */
.site-title{display:none}
.logo-dark,.logo-light{display:none; height:140px; width:auto}
html:not(.theme-light) .logo-dark{display:block}
.theme-light .logo-light{display:block}

/* Make logos larger on wider screens */
@media (min-width: 640px){
  .title-main img,
  .logo-dark,
  .logo-light{ height:200px }
}
@media (min-width: 640px){ .subtitle{ font-size:24px } }
/* Streak icon visuals */
.streak-row{margin:4px 0 12px}
.streak-row .badge{display:flex; align-items:center; gap:8px; color:var(--muted); position:relative}
.streak-icon{display:inline-flex; vertical-align:middle}
.streak-icon .icon{width:18px; height:18px; filter:drop-shadow(0 0 4px rgba(255,209,102,.35)); animation:streakTwinkle 2.2s ease-in-out infinite}
@keyframes streakTwinkle{0%,100%{transform:scale(1); opacity:1}50%{transform:scale(1.08); opacity:.9}}
.theme-light .streak-icon .icon{filter:drop-shadow(0 0 4px rgba(252,163,17,.25))}

/* Game Over streak line */
#gameOverStreak{margin-top:10px; color:var(--muted); display:flex; align-items:center; justify-content:center; gap:8px}
#gameOverStreak .streak-icon .icon{width:18px; height:18px}
#gameOverStreak .streak-count{margin-left:2px}

/* Burning streak number effect */
.streak-count{
  position:relative; display:inline-block; color:#ffd166; font-weight:800;
  text-shadow:
    0 0 calc(1px + 1px * var(--heat, 0)) #ffd166,
    0 0 calc(2px + 2px * var(--heat, 0)) #fca311,
    0 0 calc(4px + 4px * var(--heat, 0)) rgba(255,107,0,.85),
    0 0 calc(7px + 7px * var(--heat, 0)) rgba(255,60,0,.55);
  filter: saturate(calc(1 + .5 * var(--heat, 0))) brightness(calc(1 + .2 * var(--heat, 0)));
  animation: heatFlicker var(--flicker-duration, 1.2s) ease-in-out infinite alternate;
}
/* Improve contrast in light mode */
.theme-light .streak-count{
  color:#8b4b00; /* deeper amber for contrast */
  text-shadow:
    0 1px 0 rgba(0,0,0,.22),
    0 0 calc(1px + 1px * var(--heat, 0)) #ffcd66,
    0 0 calc(3px + 3px * var(--heat, 0)) rgba(252,163,17,.9),
    0 0 calc(6px + 6px * var(--heat, 0)) rgba(255,107,0,.65);
}
@keyframes heatFlicker{
  0%{ transform: translateY(0); opacity:1 }
  50%{ transform: translateY(-.5px); opacity:.97 }
  100%{ transform: translateY(0); opacity:1 }
}

/* Ember particles around the streak number */
.streak-count .ember-layer{ position:absolute; inset:0 -6px -6px -6px; pointer-events:none; z-index:0 }
.streak-count{ z-index:1 }
.streak-count .ember{
  position:absolute; top:0; width:3px; height:3px; border-radius:50%;
  background: radial-gradient(50% 50% at 50% 50%, rgba(255, 209, 102, .95) 0%, rgba(252, 163, 17, .9) 55%, rgba(255, 80, 0, .0) 70%);
  box-shadow: 0 0 6px rgba(255, 170, 40, .45);
  opacity: .8;
  transform: translateY(0) scale(var(--ember-scale, 1));
  animation: emberRise var(--ember-duration, 2.2s) linear infinite;
}
@keyframes emberRise{
  0%{ transform: translateY(0) scale(var(--ember-scale, 1)); opacity: var(--ember-opacity, .8) }
  70%{ opacity: .4 }
  100%{ transform: translateY(calc(-1 * var(--ember-travel, 24px))) scale(.85); opacity: 0 }
}

/* Make embers pop on light theme */
.theme-light .streak-count .ember{
  /* slightly larger, brighter core and stronger halo */
  transform: translateY(0) scale(calc(var(--ember-scale, 1) * 1.12));
  background: radial-gradient(50% 50% at 50% 50%, rgba(255, 190, 60, .98) 0%, rgba(251, 133, 0, .95) 52%, rgba(251, 133, 0, 0) 72%);
  box-shadow:
    0 0 10px rgba(255, 150, 20, .55),
    0 0 2px rgba(0,0,0,.18); /* subtle outline for contrast */
  opacity: .92;
  filter: saturate(1.12) brightness(1.05);
}
.theme-light .streak-count .ember-layer{ mix-blend-mode: normal }
#gameOverStreak .streak-modal{position:relative; display:inline-flex; align-items:center; gap:8px}
/* Streak info icon + bubble */
.streak-info-btn{display:inline-flex; align-items:center; justify-content:center; width:18px; height:18px; border-radius:50%;
  background:#0e1120; border:1px solid var(--shade); color:var(--muted); cursor:pointer; padding:0}
.streak-info-btn:hover{color:var(--fg)}
.streak-info-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(120,217,255,.2)}
.streak-info-bubble{position:absolute; top:100%; right:0; margin-top:8px; max-width:280px; font-size:12px; line-height:1.4;
  background:rgba(15,18,34,.96); color:var(--fg); border:1px solid var(--shade); border-radius:10px; padding:10px 12px;
  box-shadow:0 10px 24px rgba(0,0,0,.35); transform:translateY(-4px); opacity:0; pointer-events:none; transition:opacity .12s ease, transform .12s ease}
.streak-info-bubble::after{content:""; position:absolute; top:-6px; right:10px; width:10px; height:10px; transform:rotate(45deg);
  background:rgba(15,18,34,.96); border-left:1px solid var(--shade); border-top:1px solid var(--shade)}
.streak-info-bubble.show{opacity:1; pointer-events:auto; transform:translateY(0)}

/* Improve info bubble contrast in light mode */
.theme-light .streak-info-bubble{
  background:rgba(255,255,255,.98);
  color:#0f1222; /* strong dark text on light bg */
  border-color: var(--shade);
  box-shadow:0 8px 20px rgba(0,0,0,.12);
}
.theme-light .streak-info-bubble::after{
  background:rgba(255,255,255,.98);
  border-left-color: var(--shade);
  border-top-color: var(--shade);
}
