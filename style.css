:root{
  --bg:#0f1222; --fg:#e9ecf1; --muted:#a7b0c3; --acc:#78d9ff; --ok:#6dd16a; --bad:#ff6b6b; --card:#171a2e; --shade:#202543;
  --mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
}
*{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body{margin:0; color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif; background:
  radial-gradient(1200px 600px at 80% -10%, rgba(120,217,255,.08), transparent 60%),
  radial-gradient(800px 400px at 10% 0%, rgba(109,209,106,.06), transparent 60%),
  linear-gradient(180deg,var(--bg),#0c0f1a);
}
.app{max-width:900px; margin:40px auto; padding:0 20px}
h1{margin:0 0 4px 0; letter-spacing:.2px; font-weight:800}
.titlebar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px}
.help-btn{position:relative; width:40px; height:40px; border-radius:12px; border:1px solid var(--shade); background:
  radial-gradient(120% 120% at 20% 10%, rgba(120,217,255,.15), transparent 40%),
  linear-gradient(180deg,#0f142d,#0e1120);
  color:var(--fg); font-weight:800; line-height:1; font-size:18px; cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.02);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
}
.help-btn:hover{transform:translateY(-1px); background:
  radial-gradient(120% 120% at 70% 0%, rgba(120,217,255,.18), transparent 40%),
  linear-gradient(180deg,#12183a,#0f142d);
  box-shadow:0 8px 18px rgba(0,0,0,.32), 0 0 0 3px rgba(120,217,255,.12);
}
.help-btn:active{transform:translateY(0); box-shadow:0 4px 12px rgba(0,0,0,.26)}
.help-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(120,217,255,.2), 0 6px 14px rgba(0,0,0,.28)}
/* Tooltip */
.help-btn::after{content:attr(data-tip); position:absolute; left:50%; top:-8px; transform:translate(-50%,-100%) scale(.96); opacity:0; pointer-events:none;
  background:rgba(15,18,34,.95); color:var(--fg); border:1px solid var(--shade); border-radius:8px; padding:6px 8px; font-size:12px; white-space:nowrap;
  box-shadow:0 10px 22px rgba(0,0,0,.35); transition:opacity .15s ease, transform .12s ease;}
.help-btn:hover::after,.help-btn:focus-visible::after{opacity:1; transform:translate(-50%,-110%) scale(1)}
.meta{display:flex; gap:16px; color:var(--muted); margin-bottom:8px; font-size:14px}
.masked{background:linear-gradient(180deg,rgba(23,26,46,.9),rgba(18,21,37,.9)); border:1px solid var(--shade); padding:18px; border-radius:14px; text-align:center; margin:14px 0; box-shadow:0 8px 22px rgba(0,0,0,.35); backdrop-filter:saturate(120%) blur(2px)}
.tiles{display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap}
.tile{width:44px; height:54px; display:flex; align-items:center; justify-content:center; border-radius:10px; border:1px solid var(--shade); background:linear-gradient(180deg,#0f142c,#0b0e1d); font:700 22px var(--mono); letter-spacing:.5px; color:var(--fg); box-shadow:inset 0 -3px 0 rgba(255,255,255,.03)}
.tile.empty{color:var(--muted); opacity:.85}
.tile.reveal{animation:tileReveal .32s ease-out; border-color:#2f3a6a; background:linear-gradient(180deg,#14204a,#0f142c)}
.stats{display:flex; gap:12px; margin:14px 0 18px 0; color:var(--muted); flex-wrap:wrap}
.badge{display:inline-flex; align-items:center; gap:8px; background:rgba(32,37,67,.6); border:1px solid var(--shade); padding:6px 10px; border-radius:9999px; font-size:12px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02)}
.badge strong{color:var(--fg); font-weight:700}
.panel{background:linear-gradient(180deg,rgba(23,26,46,.85),rgba(20,23,40,.85)); border:1px solid var(--shade); border-radius:14px; padding:16px; margin:18px 0; box-shadow:0 8px 20px rgba(0,0,0,.28); backdrop-filter:saturate(120%) blur(2px)}
.panel h2{margin:0 0 12px 0; font-size:18px}
.row{display:flex; gap:10px}
input{flex:1; background:#0e1120; border:1px solid var(--shade); color:var(--fg); padding:12px 14px; border-radius:10px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02); font-size:16px}
input:focus{outline:none; border-color:#2f3a6a; box-shadow:0 0 0 3px rgba(120,217,255,.15)}
button{background:linear-gradient(180deg,var(--acc),#5fc9ef); color:#001018; border:0; padding:12px 16px; border-radius:10px; font-weight:700; cursor:pointer; box-shadow:0 6px 16px rgba(120,217,255,.25)}
button:hover{transform:translateY(-1px)}
button:active{transform:translateY(0)}
button:disabled{opacity:.55; cursor:not-allowed; box-shadow:none}
.qa{margin-top:12px; display:flex; flex-direction:column; gap:8px}
.qa .item{background:#0e1120; border:1px solid var(--shade); padding:10px 12px; border-radius:8px}
.qa .q{color:#b8c2d9}
.qa .a{color:#dff1ff}
.result{margin-top:12px; min-height:22px}
.ok{color:var(--ok)}
.bad{color:var(--bad)}
footer{margin-top:28px; color:var(--muted)}

/* Tutorial modal */
.hidden{display:none}
.backdrop{position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:center; justify-content:center; z-index:1000; padding:16px}
.backdrop.hidden{display:none}
.modal{background:linear-gradient(180deg,rgba(23,26,46,1),rgba(18,21,37,1)); border:1px solid var(--shade); border-radius:14px; max-width:560px; width:100%; box-shadow:0 16px 40px rgba(0,0,0,.45); animation:pop .12s ease-out; backdrop-filter:blur(6px)}
.modal-header{display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--shade)}
.modal-body{padding:14px}
.close-btn{position:relative; width:40px; height:40px; border-radius:12px; border:1px solid var(--shade); background:
  radial-gradient(120% 120% at 20% 10%, rgba(120,217,255,.15), transparent 40%),
  linear-gradient(180deg,#0f142d,#0e1120);
  color:var(--fg); font-weight:800; line-height:1; font-size:18px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 14px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.02);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease}
.close-btn:hover{transform:translateY(-1px); background:
  radial-gradient(120% 120% at 70% 0%, rgba(120,217,255,.18), transparent 40%),
  linear-gradient(180deg,#12183a,#0f142d);
  box-shadow:0 8px 18px rgba(0,0,0,.32), 0 0 0 3px rgba(120,217,255,.12)}
.close-btn:active{transform:translateY(0); box-shadow:0 4px 12px rgba(0,0,0,.26)}
.close-btn:focus-visible{outline:none; box-shadow:0 0 0 3px rgba(120,217,255,.2), 0 6px 14px rgba(0,0,0,.28)}
.modal-body ul{margin:0; padding-left:20px; color:var(--fg)}

@keyframes pop{from{transform:scale(.98); opacity:.8} to{transform:scale(1); opacity:1}}
@keyframes tileReveal{
  0%{transform:scale(.9); filter:brightness(1.2)}
  60%{transform:scale(1.06); filter:brightness(1.15)}
  100%{transform:scale(1); filter:brightness(1)}
}
.modal-body ul{margin:0; padding-left:20px; color:var(--fg)}
